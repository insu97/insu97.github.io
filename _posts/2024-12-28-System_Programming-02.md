---
layout : markdown
title : System Programming - 02
tags : [Computer_Engineering]
toc : true
---

{% include markdown.html %}

# 프로세스와 스레드 다루기

## 프로세스

> 프로세스 : 실행 중인 프로그램

- 프로세스 제어 블록(PCB)
> PID(PPID), 레지스터, 스케줄링 정보, 메모리 정보, 사용한 파일 정보, 입출력장치 정보

- 리눅스 프로세스(태스크) 상태 확인
1. R(Running) : 실행 상태
2. S(Sleeping) : 대기 상태
3. W(Waiting) : 준비 상태
4. S(Stopped) : 종료 상태
5. Z(Zombie) : 프로세스 종료 후 자원이 반환되었지만 커널 영역에 프로세스가 남아있는 상태

```
> 자식 프로세스가 종료되었을 때 부모 프로세스가 종료를 처리해주지 않으면
-> 자식 프로세스는 Zombie Process가 된다.
```

## 스레드

> 스레드 : 프로세스를 구성하는 실행 흐름의 단위  
> 각기 다른 스레드 ID, 프로그램 카운터, 레지스터, 스택

- 스레드와 프로세스 차이
> 프로세스 간에는 기본적으로 자원을 공유하지 않고, 스레드 간에는 프로세스의 자원을 공유함

- 프로세스 간에도 자원 공유가 가능함 : IPC(Inter-Process Communication)

- 스레드 조인 : 스레드 실행이 종료될 때까지 대기(스레드 종료 처리)
- 스레드 떼어내기 : 종료 시 자동으로 자원 해제

## 뮤텍스와 세마포

- 뮤텍스 초기화 / (락/언락) / 락 여부 확인 / 삭제

- 세마포
1. unnamed semaphore
> 공유 메모리에 대한 동기화 수행 시 활용  
> 공유 메모리의 일부를 세마포로 간주 접근
2. named semaphore
> 일반적인 자원에 대한 동기화 수행 시 활용  
> (세마포에 ID를 부여) 세마포를 파일과 같이 간주, 접근

## 공유 메모리 기반 IPC

- 공유 메모리
> 다수의 프로세스가 공유 가능한 메모리 영역  
> 공유하는 메모리를 읽고 씀으로써 프로세스간 통신이 가능

## 파이프 기반 IPC

- pipe
> 단방향 IPC 도구  
> 한 쪽에서는 파이프를 읽고, 한 쪽에서는 파이프에 쓴다.  
> 주로 Stream 형태의 데이터를 주고받을 때 사용  
> 파이프는 일종의 파일 : file descriptor를 기반으로 읽고 쓰기 수행

```
> 파이프에 더 이상 쓸 공간이 없을 때 쓰면 block  
> 파이프가 비어 있을 때 읽기를 시도하면 block  
> 지나치게 큰 값(리눅스의 경우 4kb 이상)쓰기 지양
```

## 시그널 다루기

- 시그널 : 소프트웨어 인터럽트
> 프로세스에게 특정 이벤트가 발생했음을 알리는 수단  
> 시그널마다 기본 동작이 정해져 있고, 처리가 가능한 것들이 있다.

- 시그널 집합 관리 : 시그널 마스킹
